<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.wpwk.mappers.ContentsMapper">

    <!-- 컨텐츠 삽입 -->
    <insert id = "create" useGeneratedKeys="true" keyProperty="id" parameterType="com.ssafy.wpwk.model.Contents">
        INSERT INTO contents (title, spend_time, created_by, updated_by)
        VALUES(#{title}, #{spendTime}, #{createdBy}, #{updatedBy})
    </insert>

    <!--컨텐츠 전체 조회 -->
    <select id="findAllContents" resultType="com.ssafy.wpwk.model.Contents">
        SELECT * FROM contents
    </select>

    <!-- 컨텐츠 검색 이용한 조회 -->
    <select id="findContentsById">
        SELECT * FROM contents
        WHERE id = #{id}
    </select>

    <!-- 컨텐츠 검색 이용한 조회 -->
    <select id="findContentsByKeyword" resultType="com.ssafy.wpwk.model.Contents" parameterType="hashmap">
        <choose>
            <when test="option == 'tagName'">
                SELECT * FROM contents
                WHERE
            </when>
            <when test="option == 'nickname'">
                SELECT * FROM contents
                WHERE
            </when>
            <when test="option == 'title'">
                SELECT * FROM contents
                WHERE title = #{keyword}
                ORDER BY id DESC;
            </when>
        </choose>
    </select>

    <!--데이터 수정 -->
    <update id="update" parameterType="com.ssafy.wpwk.model.Contents">
        UPDATE contents SET
                           title = #{title},
                           spend_time = #{spendTime},
                           updated_at = #{updatedAt},
                           updated_by = #{updatedBy}
        WHERE id = #{id}
    </update>

    <!-- 데이터 삭제 -->
    <delete id="delete">
        DELETE FROM contents
        WHERE id = #{id}
    </delete>
</mapper>